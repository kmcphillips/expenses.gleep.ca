= form_for @entry, html: { class: 'form-horizontal' } do |f|
  = f.error_messages

  - if current_household.recent_entry
    .control-group
      %label.control-label Most recent entry
      .controls
        %p{style: 'padding: 5px; margin: 0'}
          %em= current_household.recent_entry.readable

  .control-group
    = f.label :category_id, class: 'control-label', value: "Category"
    .controls
      = f.select :category_id, grouped_options_for_select(current_household.categories_for_select, selected: f.object.category_id)

  .control-group
    = f.label :amount, class: 'control-label'
    .controls
      .input-prepend
        %span.add-on $
        = f.number_field :amount, class: "input-mini"

  .control-group
    = f.label :description, class: 'control-label'
    .controls
      = f.text_field :description

  .control-group
    = f.label :incurred_on, class: 'control-label'
    .controls
      = f.date_field :incurred_on

  .control-group
    = label_tag "Over a fixed period?", nil, class: 'control-label'
    .controls
      = check_box_tag :amortized, true, f.object.incurred_until.present?, id: :incurred_until_group_toggle

  .control-group#incurred_until_group
    = f.label :incurred_until, class: 'control-label'
    .controls
      = f.date_field :incurred_until

  .form-actions
    = f.submit "Save", class: 'btn btn-primary', data: {"form-actions-spinner" => true}
    = link_to "Cancel", entries_path, class: 'btn'
